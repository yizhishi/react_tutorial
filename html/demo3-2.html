<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Hello React!</title>
    <script src="../build/react.development.js"></script>
    <script src="../build/react-dom.development.js"></script>
    <script src="../build/babel.min.js"></script>
</head>

<body>

<div id="example"></div>

<script type="text/babel">
/*
function Clock(props) {
    return (
        <div>
            <h1>Hello, world~</h1>
            <h2>It is {props.date.toLocaleTimeString()}.</h2>
        </div>
    )
}
function tick() {    
    ReactDOM.render(
        <Clock date={new Date()} />,
        document.getElementById("example")
    )
}

setInterval(tick, 1000)
*/

// class
class Clock extends React.Component {
    
    // 构造函数
    constructor(props) {
        super(props)
        this.state = {date: new Date()}
    }

    // mount 挂载, 生命周期方法
    componentDidMount() {
        this.timerID = setInterval(
            () => { this.tick() }, 
            1000
        );
    }

    // unmount 卸载, 生命周期方法
    componentWillUnmount() {
        clearInterval(this.timerID)
    }

    // tick method
    tick() {
        // setState() 方法
        this.setState({
            date: new Date()
        })
    }

    // render method
    render() {
        // return
        return (
            <div>
                <h1>Hello, world~</h1>
                <a href="https://www.runoob.com/react/react-state.html">React State(状态)</a>
                <br />
                <a href="https://zh-hans.reactjs.org/docs/state-and-lifecycle.html">State & 生命周期</a>
                <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
            </div> 
        )
    }
}

function App() {
    return (
        <div>
            <Clock />
            <Clock />
            <Clock />
        </div>
    )
}

ReactDOM.render(
    <App />,
    document.getElementById("example")
)

</script>

</body>

</html>